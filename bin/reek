#!/usr/bin/env ruby
#
# Reek examines Ruby source code for smells.
# Visit http://reek.rubyforge.org/ for docs etc.
#
# Author: Kevin Rutherford
#

require 'reek/options'

def reek(args)
  begin
    source = Reek::Options.parse(args)
    # SMELL:
    # This should use the actual type of report selected by the user's options
    puts source.full_report
    return source.smelly? ? 2 : 0
  rescue SystemExit => ex
    return ex.status
  rescue Exception => error
    $stderr.puts "Error: #{error}"
    return 1
  end
end

exit reek(ARGV)
