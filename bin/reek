#!/usr/bin/env ruby
#
# Reek examines Ruby source code for smells.
# Visit http://reek.rubyforge.org/ for docs etc.
#
# Author: Kevin Rutherford
#

require 'reek'
require 'reek/source'
require 'reek/options'

def reek(args)
  begin
    source = Reek::Options.parse(args)
    if source.smelly?
      puts source.report
      return 2
    end
    return 0
  rescue SystemExit => ex
    return ex.status
  rescue Exception => error
    $stderr.puts "Error: #{error}"
    return 1
  end
end

exit reek(ARGV)
